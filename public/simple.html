<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Bot Dashboard</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; font-family: sans-serif; background-color: #121212; color: #e0e0e0; }
        #main-container { display: flex; flex-direction: column; height: 100vh; }
        #top-section { flex: 1; display: flex; min-height: 0; }
        .iframe-container { flex: 1; border: 1px solid #333; }
        iframe { width: 100%; height: 100%; border: none; }
        #bottom-section { height: 250px; border-top: 2px solid #333; display: flex; flex-direction: column; padding: 10px; box-sizing: border-box; }
        #chat-log { flex: 1; overflow-y: auto; border: 1px solid #444; padding: 8px; margin-bottom: 10px; background-color: #1e1e1e; }
        #chat-input-container { display: flex; height: 40px; }
        #chat-input { flex: 1; padding: 10px; border: 1px solid #444; background-color: #2e2e2e; color: #e0e0e0; border-radius: 4px 0 0 4px; }
        #send-button { padding: 0 20px; border: 1px solid #444; border-left: none; background-color: #3e3e3e; color: #e0e0e0; cursor: pointer; border-radius: 0 4px 4px 0; }
        .chat-message { margin-bottom: 5px; word-wrap: break-word; }
    </style>
</head>
<body>
    <div id="main-container">
        <div id="top-section">
            <div class="iframe-container"><iframe src="/viewer/" title="Prismarine Viewer"></iframe></div>
            <div class="iframe-container"><iframe src="/inventory/" title="Web Inventory"></iframe></div>
        </div>
        <div id="bottom-section">
            <div id="chat-log"></div>
            <div id="chat-input-container">
                <input type="text" id="chat-input" placeholder="Type a message...">
                <button id="send-button">Send</button>
            </div>
        </div>
    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const socket = io({ path: '/socket.io' });
            const chatLog = document.getElementById('chat-log');
            const chatInput = document.getElementById('chat-input');
            const sendButton = document.getElementById('send-button');

            function addChatMessage(message) {
                const el = document.createElement('div');
                el.classList.add('chat-message');
                el.textContent = message;
                chatLog.appendChild(el);
                chatLog.scrollTop = chatLog.scrollHeight;
            }

            function sendMessage() {
                const message = chatInput.value.trim();
                if (message) {
                    socket.emit('send-chat-message', { message });
                    addChatMessage(`You: ${message}`);
                    chatInput.value = '';
                }
            }

            socket.on('chat-message', ({ message }) => addChatMessage(message));
            sendButton.addEventListener('click', sendMessage);
            chatInput.addEventListener('keypress', (e) => e.key === 'Enter' && sendMessage());

            socket.on('connect', () => addChatMessage('Connected to server.'));
            socket.on('disconnect', () => addChatMessage('Disconnected from server.'));
        });
    </script>
</body>
</html>
